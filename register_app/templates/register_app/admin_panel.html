{% extends "base.html" %}

{% block content %}
<div class="container mt-5">
    <div class="row">
        <!-- Sidebar -->
        <div class="col-lg-3">
            <div class="list-group">
                <a href="#" class="list-group-item list-group-item-action active">
                    Dashboard
                </a>
                <a href="#" class="list-group-item list-group-item-action" id="projectModel">Projects</a>
                <a href="#" class="list-group-item list-group-item-action" id="signInOutModel">Clock In/Out Register</a>
            </div>
        </div>
        <!-- Main Content -->
        <div class="col-lg-9">
            <h1>Admin Panel</h1>
            <div class="card mt-4">
                <div class="card-body">
                    <!-- Here we will load tables or forms dynamically -->
                    <div id="adminContent">
                        Welcome to the admin panel. Select an option from the sidebar.
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>


<!-- Modals -->

<div id="projectTable" style="display:none;">
  <h2>Project List</h2>
  <table class="table">
      <thead>
          <tr>
              <th>Project Name</th>
              <th>Project Code</th>
              <th>Status</th>
              <th>Action</th>  <!-- New header for the action buttons -->
          </tr>
      </thead>
      <tbody>
          {% for project in projects %}
              <tr>
                  <td>{{ project.project_name }}</td>
                  <td>{{ project.project_code }}</td>
                  <td>{{ project.project_status }}</td>
                  <td>
                      <a href="{% url 'edit_project' project.id %}" class="btn btn-primary">Edit</a>
                  </td>
              </tr>
          {% endfor %}
      </tbody>
  </table>
</div>

<div id="clockedInUserTable" style="display:none;">
    <h2>Clocked-in Users</h2>
    <table class="table">
        <thead>
            <tr>
                <th>Username</th>
                <th>Project</th>
                <th>Location</th>
            </tr>
        </thead>
        <tbody>
            {% for entry in clocked_in_users %}
                <tr>
                    <td>{{ entry.user.username }}</td>
                    <td>{{ entry.location.project.project_name }}</td>
                    <td>{{ entry.location.name }}</td>
                </tr>
            {% endfor %}
        </tbody>
    </table>
</div>




<!-- Optional JavaScript to handle clicks -->

<script>
// Show project table
document.addEventListener("DOMContentLoaded", function() {
    // Handle clicks on sidebar items
    document.getElementById("projectModel").addEventListener("click", function() {
        // Hide all other tables
        // Show Project table
        document.getElementById("adminContent").innerHTML = document.getElementById("projectTable").innerHTML;
    });
});

// Show clockedInUserTable 
document.getElementById("signInOutModel").addEventListener("click", function() {
    document.getElementById("adminContent").innerHTML = document.getElementById("clockedInUserTable").innerHTML;
});

</script>
{% endblock %}
