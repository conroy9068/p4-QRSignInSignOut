{% extends "base.html" %} {% load static %} {% block content %}
<!--Display form field errors -->
{% if form.errors %}
{% if form.errors %}
<ul class="list-unstyled">
  {% for field, errors in form.errors.items %} {% for error in errors %}
  <li class="text-danger">{{ error }}</li>
  {% endfor %} {% endfor %}
</ul>
{% endif %} {% if formset.errors %}
<ul class="list-unstyled">
  <!--Display form field errors -->
  {% for error in formset.errors %}
  <li class="text-danger">{{ error }}</li>
  {% endfor %}
</ul>
{% endif %}

<h2 class="m-4 text-center">Create New Project</h2>
<form id="create_project" method="post" action="{% url 'create_project' %}">
  {% csrf_token %}
  <!-- Add labels and form controls with Bootstrap classes -->
  <label for="{{ form.project_name.id_for_label }}" class="form-label">Project Name</label>
  {{ form.project_name }}

  <label for="{{ form.project_code.id_for_label }}" class="form-label">Project Code</label>
  {{ form.project_code }}

  <label for="{{ form.project_status.id_for_label }}">Project Status</label>
  {{ form.project_status }}

  <label for="{{ form.project_url.id_for_label }}">Project URL</label>
  {{ form.project_url }}

  <label for="{{ form.site_manager_name.id_for_label }}">Site Manager Name</label>
  {{ form.site_manager_name }}

  <label for="{{ form.site_manager_email.id_for_label }}">Site Manager Email</label>
  {{ form.site_manager_email }}

  <label for="{{ form.project_manager_name.id_for_label }}">Project Manager Name</label>
  {{ form.project_manager_name }}

  <label for="{{ form.project_manager_email.id_for_label }}">Project Manager Email</label>
  {{ form.project_manager_email }}

  <div class="mt-3 text-center">
    <button type="submit" class="btn btn-success">Create</button>
  </div>
</form>

<script>
  // Function to validate form
  (function() {
    "use strict";
    var forms = document.querySelectorAll(".needs-validation");
    // Loop over them and prevent submission
    Array.prototype.slice.call(forms).forEach(function(form) {
      form.addEventListener(
        "submit",
        function(event) {
          if (!form.checkValidity()) {
            event.preventDefault();
            event.stopPropagation();
          }
          form.classList.add("was-validated");
        },
        false
      );
    });
  })();
</script>
{% endblock %}