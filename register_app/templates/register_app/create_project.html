{% extends "base.html" %}

{% load static %}

{% block content %}
<style>
    /* Styles for the form and its components */
    form {
        max-width: 600px;
        margin: 0 auto;
    }
    label {
        display: block;
        margin-top: 15px;
    }
    input, select, textarea {
        width: 100%;
        padding: 10px;
        margin-top: 5px;
        border: 1px solid #ccc;
        border-radius: 4px;
    }
    .location-form {
        margin-top: 20px;
    }
    .location-form:not(:first-of-type) {
        margin-top: 30px;
        padding-top: 20px;
        border-top: 1px solid #eee;
    }
    .errorlist {
        color: red;
        list-style-type: none;
        padding: 0;
    }
    .errorlist li {
        text-transform: capitalize;
        text-decoration: none;
    }
</style>

<h2 class="m-4">Create New Project</h2>

<!-- Display errors -->
{% if form.errors %}
    <ul class="list-unstyled">
    {% for field, errors in form.errors.items %}
        {% for error in errors %}
            <li class="text-danger">{{ error }}</li>
        {% endfor %}
    {% endfor %}
    </ul>
{% endif %}

{% if formset.errors %}
    <ul class="list-unstyled">
    {% for error in formset.errors %}
        <li class="text-danger">{{ error }}</li>
    {% endfor %}
    </ul>
{% endif %}

<form method="post" action="{% url 'register' %}" class="needs-validation" novalidate>
    {% csrf_token %}
    <!-- Add labels and form controls with Bootstrap classes -->
    <label for="{{ form.project_name.id_for_label }}" class="form-label">Project Name</label>
    {{ form.project_name }}
    
    <label for="{{ form.project_code.id_for_label }}" class="form-label">Project Code</label>
    {{ form.project_code }}

    <label for="{{ form.project_status.id_for_label }}">Project Status</label>
    {{ form.project_status }}

    <label for="{{ form.project_url.id_for_label }}">Project URL</label>
    {{ form.project_url }}

    <label for="{{ form.site_manager_name.id_for_label }}">Site Manager Name</label>
    {{ form.site_manager_name }}

    <label for="{{ form.site_manager_email.id_for_label }}">Site Manager Email</label>
    {{ form.site_manager_email }}

    <label for="{{ form.project_manager_name.id_for_label }}">Project Manager Name</label>
    {{ form.project_manager_name }}

    <label for="{{ form.project_manager_email.id_for_label }}">Project Manager Email</label>
    {{ form.project_manager_email }}
        
    <div class="mt-3">
        <button type="submit" class="btn btn-primary">Create</button>
    </div>
</form>


<script>
    // Example starter JavaScript for disabling form submissions if there are invalid fields
    (function () {
        'use strict'

        // Fetch all the forms we want to apply custom Bootstrap validation styles to
        var forms = document.querySelectorAll('.needs-validation')

        // Loop over them and prevent submission
        Array.prototype.slice.call(forms)
            .forEach(function (form) {
                form.addEventListener('submit', function (event) {
                    if (!form.checkValidity()) {
                        event.preventDefault()
                        event.stopPropagation()
                    }

                    form.classList.add('was-validated')
                }, false)
            })
    })()
</script>
{% endblock %}
